{% extends 'BandBrowser/base.html' %}
{% load staticfiles %}
{% load bandBrowser_template_tags %}
{% block title_block %}
BandBrowser
{% endblock %}

{% block body_block %}

        <!-- Nav Bar -->
        <nav class="navbar navbar-expand-lg navbar-dark " id="bs-navBar"  >
            <div class="container-fluid ">


              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon" ></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav " >
                  <li class="nav-item" style="margin-top:5px" >
                    <select class="form-select" aria-label="Default select example">
                      <option selected>Most recent</option>
                      <option value="1">One</option>
                      <option value="2">Two</option>
                      <option value="3">Three</option>
                    </select>
                    
                  </li>
                  <li class="nav-item" style="margin-left:10px">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                      <label class="form-check-label" for="flexCheckDefault">
                        Musicians
                      </label>
                    </div>
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked" checked>
                      <label class="form-check-label" for="flexCheckChecked">
                        Bands
                      </label>
                    </div>
                  </li>
                  <li class="nav-item invisible" >
                    <select class="form-select" aria-label="Default select example">
                      <option selected>GuitaristGuitaristGuitaristGuitaristGuitaristGuitaristGuitaristGuitaristGuitaristGuitaristGuitaristggggg</option>
                    </select>
                  <li class="nav-item " >
                    <select class="form-select" aria-label="Default select example">
                      <option selected>Guitarist</option>
                      <option value="1">One</option>
                      <option value="2">Two</option>
                      <option value="3">Three</option>
                    </select>
                  </li>
                  <li class="nav-item" >
                    <div class="input-group rounded">
                      <input type="search" class="form-control rounded" placeholder="Search" aria-label="Search" aria-describedby="search-addon" />
                      <span class="input-group-text border-0" id="search-addon">
                        <i class="fas fa-search"></i>
                      </span>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </nav>

    <!-- <div class="middle-container"> 
        <select name="filter1" id="filter1">
            <option value="0">Most recent</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
          </select>
          <p id="musicians-p">Musicians</p>
          <p id="musicians-p2">Bands</p>
        <div class="left" style="display:inline-block">
            <input class="radio-btn" type="radio"><br>
            <input class="radio-btn" type="radio">   
        </div>
        <select name="filter2" id="filter2" style="margin-left:60%">
            <option value="0">Guitarist</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
          </select>
        
        <input type="text" class="search-input" placeholder="Search"><br>

    </div>
-->
    <div class="bottom-container">
        {% if ModelsHavePosts %}
        <!-- go through objects that have a post -->
            {% for modelHasPost in ModelsHavePosts %}
                {% if modelHasPost|get_class == 'Band' %}
                <!-- object is a band -->
                    {% for bandPost in modelHasPost|get_Posts%}
                    <!-- iterate through every post the band has -->
                        <div class="test-div">
                            <label  class ="PostElement" name ="Title">Title: {{bandPost.title}} </label >
                            <label  class ="PostElement" name ="Date added">Date added: {{bandPost.publishDate}}    Expires in: {{ bandPost.publishDate|GetRemainingTime}}</label >
                            <label  class ="PostElement" name ="Description">Description: {{bandPost.description}} </label >
                            <form id= 'viewBandPageForm{{userPost.postID}}{{modelHasPost.slug}}' method="post" action="{% url 'BandBrowser:viewBandPage' %}" enctype="multipart/form-data">
                                {% csrf_token %}
                                <textarea style = "display:none" name="BandToView" cols="30" rows="10">{{modelHasPost.slug}}</textarea>
                                <a class = 'PostElement' href="#" onclick="document.forms['viewBandPageForm{{userPost.postID}}{{modelHasPost.slug}}'].submit(); return false;">View {{modelHasPost.name}}</a>
                            </form>
                        </div>
                    {% endfor %}
                {% elif modelHasPost|get_class == 'UserProfile' %}
                    <!-- object is a user -->
                    {% for userPost in modelHasPost|get_Posts%}
                        <!-- iterate through every post the band has -->
                        <div class="test-div">
                            <label  class ="PostElement" name ="Title">Title: {{userPost.title}} </label >
                            <label  class ="PostElement" name ="Date added">Date added: {{userPost.publishDate}}    Expires in: {{ userPost.publishDate|GetRemainingTime}}</label >
                            <label  class ="PostElement" name ="Description">Description: {{userPost.description}} </label
                            <form id= 'viewUserPageForm{{userPost.postID}}{{modelHasPost.user.username}}' method="post" action="{% url 'BandBrowser:viewUserPage' %}" enctype="multipart/form-data">
                                {% csrf_token %}
                                </form>
                            <form id="viewUserPageForm{{userPost.postID}}{{modelHasPost.user.username}}" method="post" action="{% url 'BandBrowser:viewUserPage' %}" enctype="multipart/form-data">
                                {% csrf_token %}
                                <textarea style = "display:none" name="userToView" cols="30" rows="10">{{modelHasPost.user.username}}</textarea>
                                <a class = 'PostElement' href="#" onclick="document.forms['viewUserPageForm{{userPost.postID}}{{modelHasPost.user.username}}'].submit(); return false;">View {{modelHasPost.user.username}}</a>

                            </form>
                        </div>
                    {% endfor %}
                {% endif %}
            {% endfor %}
        {% else %} 
            <p>No posts...</p>
        {% endif %} 


            
    </div>
    {% if user.is_authenticated %}
    <button class="create-post-btn"><a href="{% url 'BandBrowser:createPostPage' %}">Create Post</a></button>
    {% endif %}

{% endblock %}
